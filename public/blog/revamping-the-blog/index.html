<html><head><link href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.1.0/css/bulma.min.css" rel="stylesheet"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.5.0/styles/monokai-sublime.min.css"/><link href="http://fonts.googleapis.com/css?family=Playfair+Display|Amiri" rel="stylesheet" type="text/css"/><link href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css" rel="stylesheet"/><link rel="stylesheet" href="/app.css"/><title>Revamping The Blog | Journey Through Cyberspace &amp; Realtime</title><meta property="og:title" content="Revamping The Blog"/><meta property="og:type" content="article"/><meta property="og:url" content="https://i.am.benjaminclos.com/blog/revamping-the-blog"/><meta property="og:description" content="how I chose the current stack for my blog and personal website."/><meta property="og:published_time" content="2016-07-21T04:00:00.000Z"/><meta property="og:tags" content="[object Object], [object Object], [object Object]"/></head><body class="blog"><div class="_app_kqw8u_3804 "><div class="_top_kqw8u_3838 _navigation_kqw8u_3838 _detached_kqw8u_3855 "><div class="_container_kqw8u_242 "><div class="_nav_kqw8u_1722 "><div class="_nav-center_kqw8u_2997 "><a class="_nav-item_kqw8u_2925 " href="/">home</a><a class="_nav-item_kqw8u_2925 " href="/blog">blog</a><a class="_nav-item_kqw8u_2925 " href="/blog/tags">tags</a></div></div></div></div><div class="_main_kqw8u_3810 "><div class="_container_kqw8u_242 "> <div class="_columns_kqw8u_1930 "><div class="_column_kqw8u_1925 _is-8_kqw8u_1995 _is-offset-2_kqw8u_1968 "><article class="_container_kqw8u_242 "><header><h1 class="_title_zgtne_21 ">Revamping The Blog</h1><h3>7.21.2016</h3><h3></h3><h3 class="_tag-list_zgtne_14 "><a href="/blog/tags/meta">meta</a><a href="/blog/tags/javascript">javascript</a><a href="/blog/tags/bulma">bulma</a></h3><h3 class="_tldr_zgtne_27 ">ran into some hiccups, wrote a brunch plugin, feel satisfied for the moment.</h3></header><div class="_content_zgtne_37 _block_kqw8u_238 "><p>In an attempt to streamline my workflow for blogging, I recently decided to revamp my blog.  The first step for me was to come up with my desired features:</p>
<ul>
<li>statically compiled Markdown to HTML</li>
<li>a tag system</li>
<li>a draft system</li>
<li>Disqus support</li>
<li>interoperability with the Brunch ecosystem</li>
<li>minimal configuration</li>
<li>no need to write Javascript to manage anything</li>
</ul>
<p>After spending some time looking for an already authored plugin, I came away fruitless. I knew I was going to have to get my hands dirty.  It was not my first rodeo with riding a Brunch plugin, but it had been awhile since I had delved into the core of the ecosystem and I knew that quite a bit had changed.  After an hour or so of hacking away I had a functional plugin already fleshed out, and that is when I came across this gem in the Brunch <a href="http://brunch.io/docs/using-plugins">documentation</a>:</p>
<p><em>To make your JS component aware of the actual class name, a compiler can allow you to require that css file to get information about its class name mappings, Note: this exmaple is real. CSS modules are supported by several core stylesheet compilers with a configuration option: stylus-brunch, sass-brunch, and css-brunch.</em></p>
<p>Immediately, I knew this feature was something I wanted to use on both the blog and the SPA.  I almost always use <a href="https://mithril.js.org">Mithril.js</a> for my work when I can, and my personal website is no exception.  With this, I could dynamically generate functions that created my Mithril elements from my CSS framework.  For this website I had already chosen <a href="https://bulma.io">bulma</a>.  This meant I could write my Mithril views like this:</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">section</span> (<span class="hljs-params">{title, text}</span>) </span>{
  <span class="hljs-keyword">return</span> bulma.section(
      bulma.title(title)
    , bulma.paragraph(text)
  )
}
</code></pre>
<p>The next step was getting it working with the static compilation part of the build, as the CSS classes are mangled in this CSS-JS interop, turning <code>.someClass</code> into <code>.someClass_w7jv7_238</code> which means my static content compilation needed to also be aware of the interop, so I could use them in the Pug templates.</p>
<p>After a bit of head scratching on how to reconcile the two compile paths and some back and forth with fellow developer and friend <a href="https://twitter.com/@jonlim">@jonlim</a> I resolved to add an <code>onCompile</code> hook, which occurs after Brunch compiles, and check the resulting source graph for any source files that were not Javascript, but were being output Javascript by Brunch.  After a bit of playing, I had it working and could now write the templates for my blog while using my sass definitions like so:</p>
<pre><code class="language-jade">extends ../layout

block main
  header
    div(class=css.content)
      h1(class=css.title) posts
</code></pre>
<p>So far, so good, and we will just have to see how it goes for a couple of months.  I went a head and published the plugin to help someone quickly get a static blog up and running called <a href="https://github.com/ondreian/brunch-blog">brunch-blog</a> on NPM, feel free to use it and give me some feedback, report an issue or open a pull-request.</p>
</div></article><section class="section comments"><div class="content"><div id="disqus_thread"><script>(function() {  // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = '//benjaminclos.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();</script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript></div></div></section></div></div></div></div><div class="_navigation_kqw8u_3838 _bottom_kqw8u_3901 "><div class="_container_kqw8u_242 "><div class="_nav_kqw8u_1722 "><div class="_nav-center_kqw8u_2997 "><a class="_nav-item_kqw8u_2925 " href="https://github.com/ondreian"><i class="ion-social-github"></i></a><a class="_nav-item_kqw8u_2925 " href="https://twitter.com/benjaminclos"><i class="ion-social-twitter"></i></a></div></div></div></div></div><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-82549801-1', 'auto');
ga('send', 'pageview');</script></body></html>